{"version":3,"file":"typescript-api-platform.umd.js","sources":["../src/model/IdData.ts","../src/model/AbstractData.ts","../src/model/Message.ts","../src/function/configureCancel.ts","../src/function/configurePage.ts","../src/function/createPropsParams.ts","../src/resource/AbstractResource.ts","../src/resource/AbstractApiResource.ts","../src/resource/AbstractGetEntityResource.ts","../src/resource/AbstractEntityResource.ts","../src/resource/AbstractDataResource.ts","../src/resource/DefaultDataResource.ts","../src/typescript-api-platform.ts"],"sourcesContent":["export default class IdData<T> {\n  id?: T | null = null\n}\n","import IdData from './IdData'\r\n\r\nexport default class AbstractData extends IdData<number> {\r\n}\r\n","export default class Message {\r\n  message?: string | null = null\r\n}\r\n","import { AxiosRequestConfig, CancelTokenSource } from 'axios'\r\n\r\nexport default function configureCancel (cancelTokenSource?: CancelTokenSource, config?: AxiosRequestConfig) {\r\n  if (!cancelTokenSource) {\r\n    return config\r\n  }\r\n\r\n  if (!config) {\r\n    config = {}\r\n  }\r\n\r\n  config.cancelToken = cancelTokenSource.token\r\n  return config\r\n}\r\n","import Page from '../model/Page'\nimport { AxiosRequestConfig } from 'axios'\n\nexport default function configurePage (page?: Page, config?: AxiosRequestConfig) {\n  if (!page) {\n    return config\n  }\n\n  if (!config) {\n    config = {}\n  }\n\n  if (!config.headers) {\n    config.headers = {}\n  }\n\n  config.headers['Pagination-Page'] = page.page\n  config.headers['Pagination-ItemsPerPage'] = page.itemsPerPage\n\n  return config\n}\n","export default function createPropsParams (props: string[]): string {\n  const params: Set<string> = new Set<string>()\n\n  for (const prop of props) {\n    const path = prop.split('.')\n    let i = 0\n    let param = 'props'\n    while (i < path.length) {\n      if (i === path.length - 1) {\n        if (path[i] === '*') {\n          param += '=true'\n        } else {\n          param += `[]=${path[i]}`\n        }\n      } else {\n        param += `[${path[i]}]`\n      }\n      i++\n    }\n    params.add(param)\n  }\n  return Array.from(params).join('&')\n}\n","import { AxiosInstance, AxiosPromise, AxiosResponse } from 'axios'\r\n\r\n/**\r\n * The basic comportment of a resource which access an API\r\n *\r\n * The Axios response stay available using the property `$axios`\r\n */\r\nexport default abstract class AbstractResource {\r\n  protected axios: AxiosInstance\r\n  protected objectFactory?: (data: any) => any\r\n\r\n  constructor (axios: AxiosInstance, ObjectConstructor?: { new (): any }) {\r\n    this.axios = axios\r\n\r\n    if (ObjectConstructor) {\r\n      this.objectFactory = (data: any) => {\r\n        if (Array.isArray(data)) {\r\n          data = data.map((item) => {\r\n            const constructed = new ObjectConstructor()\r\n            return Object.assign(constructed, item)\r\n          })\r\n        } else {\r\n          const constructed = new ObjectConstructor()\r\n          data = Object.assign(constructed, data)\r\n        }\r\n        return data\r\n      }\r\n    }\r\n  }\r\n\r\n  protected wrapHydraItem (data: any): any & { $hydra: any } {\r\n    const $hydra: { [key: string]: any } = {}\r\n    for (const key of Object.keys(data)) {\r\n      if (key.startsWith('@') || (key.startsWith('hydra') && key !== 'hydra:member')) {\r\n        $hydra[key] = data[key]\r\n        delete data[key]\r\n      }\r\n    }\r\n    if ($hydra['@type'] === 'hydra:Collection') {\r\n      data = data['hydra:member']\r\n      for (const key of Object.keys(data)) {\r\n        data[key] = this.wrapHydraItem(data[key])\r\n      }\r\n    }\r\n    data.$hydra = $hydra\r\n    return data\r\n  }\r\n\r\n  protected wrapPromise (axiosPromise: AxiosPromise, objectFactory?: (data: any) => any) {\r\n    return new Promise((resolve, reject) => {\r\n      axiosPromise.then((axiosResponse: AxiosResponse) => {\r\n        let data = axiosResponse.data\r\n        if (typeof data === 'object') {\r\n          data = this.wrapHydraItem(data)\r\n\r\n          if (!objectFactory) {\r\n            objectFactory = this.objectFactory\r\n          }\r\n\r\n          if (objectFactory) {\r\n            data = objectFactory(data)\r\n            axiosResponse.data = data\r\n          }\r\n\r\n          data.$axios = axiosResponse\r\n          delete data.$axios.data\r\n\r\n          const headers = axiosResponse.headers\r\n\r\n          if ('pagination-page' in headers || 'pagination-itemsperpage' in headers || 'pagination-itemstotalcount' in headers) {\r\n            data.$page = {\r\n              page: parseInt(headers['pagination-page'], 10),\r\n              itemsPerPage: parseInt(headers['pagination-itemsperpage'], 10),\r\n              itemsTotalCount: parseInt(headers['pagination-itemstotalcount'], 10)\r\n            }\r\n          }\r\n\r\n          resolve(data)\r\n        } else {\r\n          resolve(axiosResponse.data)\r\n        }\r\n      }).catch(reject)\r\n    })\r\n  }\r\n}\r\n","import AbstractResource from './AbstractResource'\nimport createPropsParams from '../function/createPropsParams'\nimport AxiosResponseExt from '../model/AxiosResponseExt'\nimport { AxiosRequestConfig } from 'axios'\nimport moment from 'moment'\nimport GetOptions from '../model/GetOptions'\nimport GetOneOptions from '../model/GetOneOptions'\n\nexport default abstract class AbstractApiResource<ResponseType, InputType = Partial<ResponseType>> extends AbstractResource {\n  abstract readonly prefix: string\n\n  private loadProps (params: string[], options: GetOneOptions) {\n    if (options.props) {\n      params.push(createPropsParams(options.props))\n    }\n  }\n\n  private buildSearch (field: string, query: string | number, type: string | undefined, isArray: boolean = false) {\n    if (type) {\n      return `${field}[${type}]=${query}`\n    }\n    if (isArray) {\n      return `${field}[]=${query}`\n    }\n    return `${field}=${query}`\n  }\n\n  private loadSearches (params: string[], options: GetOptions) {\n    if (options.searches) {\n      for (const search of options.searches) {\n        if (Array.isArray(search.query)) {\n          search.query.forEach((item: string | number) => {\n            params.push(this.buildSearch(search.field, item, search.type, true))\n          })\n        } else {\n          params.push(this.buildSearch(search.field, search.query, search.type))\n        }\n      }\n    }\n  }\n\n  private loadSort (params: string[], options: GetOptions) {\n    if (options.sort) {\n      params.push(`order[${options.sort.field}]=${options.sort.desc ? 'desc' : 'asc'}`)\n    }\n  }\n\n  private loadPage (params: string[], options: GetOptions) {\n    if (options.page) {\n      params.push('pagination=true')\n      if (options.page.page) {\n        params.push(`page=${options.page.page}`)\n      }\n      if (options.page.itemsPerPage) {\n        params.push(`itemsPerPage=${options.page.itemsPerPage}`)\n      }\n    } else {\n      params.push('pagination=false')\n    }\n  }\n\n  private buildParams (options?: GetOptions | GetOneOptions): string[] {\n    const params: string[] = []\n\n    if (!options) options = {}\n\n    this.loadProps(params, options)\n    this.loadSearches(params, options)\n    this.loadSort(params, options)\n    this.loadPage(params, options)\n\n    return params\n  }\n\n  private buildUrl (path: string, options?: GetOptions | GetOneOptions): string {\n    const params = this.buildParams(options)\n\n    // TODO: Les paramètres peuvent être pasés proprement dans AXIOS !\n    return params && params.length > 0 ? `${path}?${params.join('&')}` : path\n  }\n\n  private preProcessData (item: any): any {\n    Object.keys(item).forEach((key) => {\n      if (item[key] instanceof Date) {\n        const date = moment(item[key])\n        item[key] = date.format('YYYY-MM-DD HH:mm:ss')\n      }\n    })\n    return item\n  }\n\n  async count<GetResponseType = ResponseType> (options?: GetOptions): Promise<number & AxiosResponseExt> {\n    const numberOfResultOptions: GetOptions = {\n      ...options,\n      ...{\n        page: {\n          page: 1,\n          itemsPerPage: 1\n        }\n      }\n    }\n    const getNumberOfResults = await this.get(numberOfResultOptions)\n    return getNumberOfResults.$hydra['hydra:totalItems']\n  }\n\n  async getAll<GetResponseType = ResponseType> (options?: GetOptions): Promise<GetResponseType[] & AxiosResponseExt> {\n    return this.get(options)\n  }\n\n  get<GetResponseType = ResponseType> (options?: GetOptions): Promise<GetResponseType[] & AxiosResponseExt> {\n    const url = this.buildUrl(this.prefix, options)\n    const axiosConfig = options ? options.axiosConfig : undefined\n\n    const promise = this.wrapPromise(this.axios.get(url, axiosConfig))\n    return promise as Promise<GetResponseType[] & AxiosResponseExt>\n  }\n\n  getOne<GetResponseType = ResponseType> (id: number | string, options?: GetOneOptions): Promise<GetResponseType & AxiosResponseExt> {\n    const url = this.buildUrl(`${this.prefix}/${id}`, options)\n    const axiosConfig = options ? options.axiosConfig : undefined\n\n    const promise = this.wrapPromise(this.axios.get(url, axiosConfig))\n    return promise as Promise<GetResponseType & AxiosResponseExt>\n  }\n\n  post<PostInputType = InputType, PostResponseType = ResponseType> (item: PostInputType, options?: GetOneOptions): Promise<PostResponseType & AxiosResponseExt> {\n    const url = this.buildUrl(this.prefix, options)\n    const axiosConfig = options ? options.axiosConfig : undefined\n\n    const promise = this.wrapPromise(this.axios.post(url, this.preProcessData(item), axiosConfig))\n    return promise as Promise<PostResponseType & AxiosResponseExt>\n  }\n\n  delete<DeleteResponseType = ResponseType> (id: number | string, options?: GetOneOptions): Promise<ResponseType & AxiosResponseExt> {\n    const url = this.buildUrl(`${this.prefix}/${id}`, options)\n    const axiosConfig = options ? options.axiosConfig : undefined\n\n    const promise = this.wrapPromise(this.axios.delete(url, axiosConfig))\n    return promise as Promise<ResponseType & AxiosResponseExt>\n  }\n\n  put<PutInputType = InputType, PutResponseType = ResponseType> (id: number | string, item: PutInputType, options?: GetOneOptions): Promise<PutResponseType & AxiosResponseExt> {\n    const url = this.buildUrl(`${this.prefix}/${id}`, options)\n    const axiosConfig = options ? options.axiosConfig : undefined\n\n    const promise = this.wrapPromise(this.axios.put(url, this.preProcessData(item), axiosConfig))\n    return promise as Promise<PutResponseType & AxiosResponseExt>\n  }\n\n  patch<PatchInputType = InputType, PatchResponseType = ResponseType> (id: number | string, item: PatchInputType, options?: GetOneOptions): Promise<PatchResponseType & AxiosResponseExt> {\n    const url = this.buildUrl(`${this.prefix}/${id}`, options)\n    const axiosConfig = options && options.axiosConfig ? options.axiosConfig : {} as AxiosRequestConfig\n\n    if (!axiosConfig.headers) {\n      axiosConfig.headers = {}\n    }\n\n    if (!axiosConfig.headers['Content-Type']) {\n      axiosConfig.headers['Content-Type'] = 'application/merge-patch+json'\n    }\n\n    const promise = this.wrapPromise(this.axios.patch(url, this.preProcessData(item), axiosConfig))\n    return promise as Promise<PatchResponseType & AxiosResponseExt>\n  }\n}\n","import { AxiosInstance, CancelTokenSource } from 'axios'\nimport AbstractResource from './AbstractResource'\nimport AxiosResponseExt from '../model/AxiosResponseExt'\n\nexport default abstract class AbstractGetEntityResource<T, K> extends AbstractResource {\n  private prefix: string\n\n  constructor (axios: AxiosInstance, prefix: string) {\n    super(axios)\n    this.prefix = prefix\n  }\n\n  getPath (id?: K): string {\n    if (id === undefined) {\n      return this.prefix\n    } else {\n      const idPath = this.getIdPathRepresentation(id)\n      return `${this.prefix}/${idPath}`\n    }\n  }\n\n  getIdPathRepresentation (id: K): string {\n    return '' + id\n  }\n\n  get (id: K, cancelTokenSource?: CancelTokenSource): Promise<T & AxiosResponseExt> {\n    const path = this.getPath(id)\n    const cancelOptions = cancelTokenSource ? { cancelToken: cancelTokenSource.token } : undefined\n    const promise = this.wrapPromise(this.axios.get(path, cancelOptions))\n    return promise as Promise<T & AxiosResponseExt>\n  }\n}\n","import { CancelTokenSource } from 'axios'\nimport AbstractGetEntityResource from './AbstractGetEntityResource'\nimport AxiosResponseExt from '../model/AxiosResponseExt'\n\nexport default abstract class AbstractEntityResource<T, K> extends AbstractGetEntityResource<T, K> {\n  abstract getObjectId (object: T): K\n\n  getPathFromObject (object?: T) {\n    if (object === undefined) {\n      return this.getPath()\n    } else {\n      const id = this.getObjectId(object)\n      return this.getPath(id)\n    }\n  }\n\n  getFromObject (object: T): Promise<T & AxiosResponseExt> {\n    return this.get(this.getObjectId(object))\n  }\n\n  list (cancelTokenSource?: CancelTokenSource): Promise<T[] & AxiosResponseExt> {\n    const cancelOptions = cancelTokenSource ? { cancelToken: cancelTokenSource.token } : undefined\n    const promise = this.wrapPromise(this.axios.get(this.getPath(), cancelOptions))\n    return promise as Promise<T[] & AxiosResponseExt>\n  }\n\n  create (object: T): Promise<T & AxiosResponseExt> {\n    return this.wrapPromise(this.axios.post(this.getPath(), object)) as Promise<T & AxiosResponseExt>\n  }\n\n  deleteFromObject (object: T): Promise<T & AxiosResponseExt> {\n    return this.delete(this.getObjectId(object))\n  }\n\n  delete (id: K): Promise<T & AxiosResponseExt> {\n    const path = this.getPath(id)\n    return this.wrapPromise(this.axios.delete(path)) as Promise<T & AxiosResponseExt>\n  }\n\n  update (object: T): Promise<T & AxiosResponseExt> {\n    const path = this.getPathFromObject(object)\n    return this.wrapPromise(this.axios.put(path, object)) as Promise<T & AxiosResponseExt>\n  }\n}\n","import IdData from '../model/IdData'\nimport AbstractEntityResource from './AbstractEntityResource'\n\nexport default abstract class AbstractDataResource<T extends IdData<any>> extends AbstractEntityResource<T, string> {\n  getObjectId (object: T): string {\n    return object.id\n  }\n}\n","import { AxiosInstance } from 'axios'\nimport IdData from '../model/IdData'\nimport AbstractDataResource from './AbstractDataResource'\n\nexport default class DefaultDataResource<T extends IdData<any>> extends AbstractDataResource<T> {\n  constructor (axios: AxiosInstance, dataName: string) {\n    super(axios, dataName)\n  }\n}\n","// Expose all models\nimport AbstractData from './model/AbstractData'\nimport ApiSearch from './model/ApiSearch'\nimport AxiosResponseExt from './model/AxiosResponseExt'\nimport GetOneOptions from './model/GetOneOptions'\nimport GetOptions from './model/GetOptions'\nimport IdData from './model/IdData'\nimport Message from './model/Message'\nimport Page from './model/Page'\n// Expose all functions\nimport configureCancel from './function/configureCancel'\nimport configurePage from './function/configurePage'\nimport createPropsParams from './function/createPropsParams'\n// Expose all resouces\nimport AbstractApiResource from './resource/AbstractApiResource'\nimport AbstractDataResource from './resource/AbstractDataResource'\nimport AbstractEntityResource from './resource/AbstractEntityResource'\nimport AbstractGetEntityResource from './resource/AbstractGetEntityResource'\nimport AbstractResource from './resource/AbstractResource'\nimport DefaultDataResource from './resource/DefaultDataResource'\n\nexport {\n  AbstractData,\n  ApiSearch,\n  AxiosResponseExt,\n  GetOneOptions,\n  GetOptions,\n  IdData,\n  Message,\n  Page,\n  configureCancel,\n  configurePage,\n  createPropsParams,\n  AbstractApiResource,\n  AbstractDataResource,\n  AbstractEntityResource,\n  AbstractGetEntityResource,\n  AbstractResource,\n  DefaultDataResource\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAA;QAAA;YACE,OAAE,GAAc,IAAI,CAAA;SACrB;QAAD,aAAC;IAAD,CAAC,IAAA;;ICAD;QAA0C,gCAAc;QAAxD;;SACC;QAAD,mBAAC;IAAD,CADA,CAA0C,MAAM,GAC/C;;ICHD;QAAA;YACE,YAAO,GAAmB,IAAI,CAAA;SAC/B;QAAD,cAAC;IAAD,CAAC,IAAA;;aCAuB,eAAe,CAAE,iBAAqC,EAAE,MAA2B;QACzG,IAAI,CAAC,iBAAiB,EAAE;YACtB,OAAO,MAAM,CAAA;SACd;QAED,IAAI,CAAC,MAAM,EAAE;YACX,MAAM,GAAG,EAAE,CAAA;SACZ;QAED,MAAM,CAAC,WAAW,GAAG,iBAAiB,CAAC,KAAK,CAAA;QAC5C,OAAO,MAAM,CAAA;IACf,CAAC;;aCVuB,aAAa,CAAE,IAAW,EAAE,MAA2B;QAC7E,IAAI,CAAC,IAAI,EAAE;YACT,OAAO,MAAM,CAAA;SACd;QAED,IAAI,CAAC,MAAM,EAAE;YACX,MAAM,GAAG,EAAE,CAAA;SACZ;QAED,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE;YACnB,MAAM,CAAC,OAAO,GAAG,EAAE,CAAA;SACpB;QAED,MAAM,CAAC,OAAO,CAAC,iBAAiB,CAAC,GAAG,IAAI,CAAC,IAAI,CAAA;QAC7C,MAAM,CAAC,OAAO,CAAC,yBAAyB,CAAC,GAAG,IAAI,CAAC,YAAY,CAAA;QAE7D,OAAO,MAAM,CAAA;IACf,CAAC;;aCpBuB,iBAAiB,CAAE,KAAe;QACxD,IAAM,MAAM,GAAgB,IAAI,GAAG,EAAU,CAAA;QAE7C,KAAmB,UAAK,EAAL,eAAK,EAAL,mBAAK,EAAL,IAAK,EAAE;YAArB,IAAM,IAAI,cAAA;YACb,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;YAC5B,IAAI,CAAC,GAAG,CAAC,CAAA;YACT,IAAI,KAAK,GAAG,OAAO,CAAA;YACnB,OAAO,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE;gBACtB,IAAI,CAAC,KAAK,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;oBACzB,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;wBACnB,KAAK,IAAI,OAAO,CAAA;qBACjB;yBAAM;wBACL,KAAK,IAAI,QAAM,IAAI,CAAC,CAAC,CAAG,CAAA;qBACzB;iBACF;qBAAM;oBACL,KAAK,IAAI,MAAI,IAAI,CAAC,CAAC,CAAC,MAAG,CAAA;iBACxB;gBACD,CAAC,EAAE,CAAA;aACJ;YACD,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;SAClB;QACD,OAAO,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;IACrC,CAAC;;ICpBD;;;;;IAKA;QAIE,0BAAa,KAAoB,EAAE,iBAAmC;YACpE,IAAI,CAAC,KAAK,GAAG,KAAK,CAAA;YAElB,IAAI,iBAAiB,EAAE;gBACrB,IAAI,CAAC,aAAa,GAAG,UAAC,IAAS;oBAC7B,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;wBACvB,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,UAAC,IAAI;4BACnB,IAAM,WAAW,GAAG,IAAI,iBAAiB,EAAE,CAAA;4BAC3C,OAAO,MAAM,CAAC,MAAM,CAAC,WAAW,EAAE,IAAI,CAAC,CAAA;yBACxC,CAAC,CAAA;qBACH;yBAAM;wBACL,IAAM,WAAW,GAAG,IAAI,iBAAiB,EAAE,CAAA;wBAC3C,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,EAAE,IAAI,CAAC,CAAA;qBACxC;oBACD,OAAO,IAAI,CAAA;iBACZ,CAAA;aACF;SACF;QAES,wCAAa,GAAvB,UAAyB,IAAS;YAChC,IAAM,MAAM,GAA2B,EAAE,CAAA;YACzC,KAAkB,UAAiB,EAAjB,KAAA,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAjB,cAAiB,EAAjB,IAAiB,EAAE;gBAAhC,IAAM,GAAG,SAAA;gBACZ,IAAI,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,GAAG,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,GAAG,KAAK,cAAc,CAAC,EAAE;oBAC9E,MAAM,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAA;oBACvB,OAAO,IAAI,CAAC,GAAG,CAAC,CAAA;iBACjB;aACF;YACD,IAAI,MAAM,CAAC,OAAO,CAAC,KAAK,kBAAkB,EAAE;gBAC1C,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,CAAA;gBAC3B,KAAkB,UAAiB,EAAjB,KAAA,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAjB,cAAiB,EAAjB,IAAiB,EAAE;oBAAhC,IAAM,GAAG,SAAA;oBACZ,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAA;iBAC1C;aACF;YACD,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;YACpB,OAAO,IAAI,CAAA;SACZ;QAES,sCAAW,GAArB,UAAuB,YAA0B,EAAE,aAAkC;YAArF,iBAmCC;YAlCC,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;gBACjC,YAAY,CAAC,IAAI,CAAC,UAAC,aAA4B;oBAC7C,IAAI,IAAI,GAAG,aAAa,CAAC,IAAI,CAAA;oBAC7B,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;wBAC5B,IAAI,GAAG,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAA;wBAE/B,IAAI,CAAC,aAAa,EAAE;4BAClB,aAAa,GAAG,KAAI,CAAC,aAAa,CAAA;yBACnC;wBAED,IAAI,aAAa,EAAE;4BACjB,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC,CAAA;4BAC1B,aAAa,CAAC,IAAI,GAAG,IAAI,CAAA;yBAC1B;wBAED,IAAI,CAAC,MAAM,GAAG,aAAa,CAAA;wBAC3B,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAA;wBAEvB,IAAM,OAAO,GAAG,aAAa,CAAC,OAAO,CAAA;wBAErC,IAAI,iBAAiB,IAAI,OAAO,IAAI,yBAAyB,IAAI,OAAO,IAAI,4BAA4B,IAAI,OAAO,EAAE;4BACnH,IAAI,CAAC,KAAK,GAAG;gCACX,IAAI,EAAE,QAAQ,CAAC,OAAO,CAAC,iBAAiB,CAAC,EAAE,EAAE,CAAC;gCAC9C,YAAY,EAAE,QAAQ,CAAC,OAAO,CAAC,yBAAyB,CAAC,EAAE,EAAE,CAAC;gCAC9D,eAAe,EAAE,QAAQ,CAAC,OAAO,CAAC,4BAA4B,CAAC,EAAE,EAAE,CAAC;6BACrE,CAAA;yBACF;wBAED,OAAO,CAAC,IAAI,CAAC,CAAA;qBACd;yBAAM;wBACL,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,CAAA;qBAC5B;iBACF,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;aACjB,CAAC,CAAA;SACH;QACH,uBAAC;IAAD,CAAC,IAAA;;IC5ED;QAA2G,uCAAgB;QAA3H;;SA4JC;QAzJS,uCAAS,GAAjB,UAAmB,MAAgB,EAAE,OAAsB;YACzD,IAAI,OAAO,CAAC,KAAK,EAAE;gBACjB,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAA;aAC9C;SACF;QAEO,yCAAW,GAAnB,UAAqB,KAAa,EAAE,KAAsB,EAAE,IAAwB,EAAE,OAAwB;YAAxB,wBAAA,EAAA,eAAwB;YAC5G,IAAI,IAAI,EAAE;gBACR,OAAU,KAAK,SAAI,IAAI,UAAK,KAAO,CAAA;aACpC;YACD,IAAI,OAAO,EAAE;gBACX,OAAU,KAAK,WAAM,KAAO,CAAA;aAC7B;YACD,OAAU,KAAK,SAAI,KAAO,CAAA;SAC3B;QAEO,0CAAY,GAApB,UAAsB,MAAgB,EAAE,OAAmB;YAA3D,iBAYC;YAXC,IAAI,OAAO,CAAC,QAAQ,EAAE;wCACT,MAAM;oBACf,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;wBAC/B,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,UAAC,IAAqB;4BACzC,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAA;yBACrE,CAAC,CAAA;qBACH;yBAAM;wBACL,MAAM,CAAC,IAAI,CAAC,OAAK,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAA;qBACvE;;;gBAPH,KAAqB,UAAgB,EAAhB,KAAA,OAAO,CAAC,QAAQ,EAAhB,cAAgB,EAAhB,IAAgB;oBAAhC,IAAM,MAAM,SAAA;4BAAN,MAAM;iBAQhB;aACF;SACF;QAEO,sCAAQ,GAAhB,UAAkB,MAAgB,EAAE,OAAmB;YACrD,IAAI,OAAO,CAAC,IAAI,EAAE;gBAChB,MAAM,CAAC,IAAI,CAAC,WAAS,OAAO,CAAC,IAAI,CAAC,KAAK,WAAK,OAAO,CAAC,IAAI,CAAC,IAAI,GAAG,MAAM,GAAG,KAAK,CAAE,CAAC,CAAA;aAClF;SACF;QAEO,sCAAQ,GAAhB,UAAkB,MAAgB,EAAE,OAAmB;YACrD,IAAI,OAAO,CAAC,IAAI,EAAE;gBAChB,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAA;gBAC9B,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE;oBACrB,MAAM,CAAC,IAAI,CAAC,UAAQ,OAAO,CAAC,IAAI,CAAC,IAAM,CAAC,CAAA;iBACzC;gBACD,IAAI,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE;oBAC7B,MAAM,CAAC,IAAI,CAAC,kBAAgB,OAAO,CAAC,IAAI,CAAC,YAAc,CAAC,CAAA;iBACzD;aACF;iBAAM;gBACL,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAA;aAChC;SACF;QAEO,yCAAW,GAAnB,UAAqB,OAAoC;YACvD,IAAM,MAAM,GAAa,EAAE,CAAA;YAE3B,IAAI,CAAC,OAAO;gBAAE,OAAO,GAAG,EAAE,CAAA;YAE1B,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,OAAO,CAAC,CAAA;YAC/B,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,OAAO,CAAC,CAAA;YAClC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,OAAO,CAAC,CAAA;YAC9B,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,OAAO,CAAC,CAAA;YAE9B,OAAO,MAAM,CAAA;SACd;QAEO,sCAAQ,GAAhB,UAAkB,IAAY,EAAE,OAAoC;YAClE,IAAM,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAA;;YAGxC,OAAO,MAAM,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,GAAM,IAAI,SAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAG,GAAG,IAAI,CAAA;SAC1E;QAEO,4CAAc,GAAtB,UAAwB,IAAS;YAC/B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG;gBAC5B,IAAI,IAAI,CAAC,GAAG,CAAC,YAAY,IAAI,EAAE;oBAC7B,IAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAA;oBAC9B,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAA;iBAC/C;aACF,CAAC,CAAA;YACF,OAAO,IAAI,CAAA;SACZ;QAEK,mCAAK,GAAX,UAA6C,OAAoB;;;;;;4BACzD,qBAAqB,yBACtB,OAAO,GACP;gCACD,IAAI,EAAE;oCACJ,IAAI,EAAE,CAAC;oCACP,YAAY,EAAE,CAAC;iCAChB;6BACF,CACF,CAAA;4BAC0B,qBAAM,IAAI,CAAC,GAAG,CAAC,qBAAqB,CAAC,EAAA;;4BAA1D,kBAAkB,GAAG,SAAqC;4BAChE,sBAAO,kBAAkB,CAAC,MAAM,CAAC,kBAAkB,CAAC,EAAA;;;;SACrD;QAEK,oCAAM,GAAZ,UAA8C,OAAoB;;;oBAChE,sBAAO,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,EAAA;;;SACzB;QAED,iCAAG,GAAH,UAAqC,OAAoB;YACvD,IAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,CAAA;YAC/C,IAAM,WAAW,GAAG,OAAO,GAAG,OAAO,CAAC,WAAW,GAAG,SAAS,CAAA;YAE7D,IAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC,CAAA;YAClE,OAAO,OAAwD,CAAA;SAChE;QAED,oCAAM,GAAN,UAAwC,EAAmB,EAAE,OAAuB;YAClF,IAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAI,IAAI,CAAC,MAAM,SAAI,EAAI,EAAE,OAAO,CAAC,CAAA;YAC1D,IAAM,WAAW,GAAG,OAAO,GAAG,OAAO,CAAC,WAAW,GAAG,SAAS,CAAA;YAE7D,IAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC,CAAA;YAClE,OAAO,OAAsD,CAAA;SAC9D;QAED,kCAAI,GAAJ,UAAkE,IAAmB,EAAE,OAAuB;YAC5G,IAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,CAAA;YAC/C,IAAM,WAAW,GAAG,OAAO,GAAG,OAAO,CAAC,WAAW,GAAG,SAAS,CAAA;YAE7D,IAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,WAAW,CAAC,CAAC,CAAA;YAC9F,OAAO,OAAuD,CAAA;SAC/D;QAED,oCAAM,GAAN,UAA2C,EAAmB,EAAE,OAAuB;YACrF,IAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAI,IAAI,CAAC,MAAM,SAAI,EAAI,EAAE,OAAO,CAAC,CAAA;YAC1D,IAAM,WAAW,GAAG,OAAO,GAAG,OAAO,CAAC,WAAW,GAAG,SAAS,CAAA;YAE7D,IAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC,CAAA;YACrE,OAAO,OAAmD,CAAA;SAC3D;QAED,iCAAG,GAAH,UAA+D,EAAmB,EAAE,IAAkB,EAAE,OAAuB;YAC7H,IAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAI,IAAI,CAAC,MAAM,SAAI,EAAI,EAAE,OAAO,CAAC,CAAA;YAC1D,IAAM,WAAW,GAAG,OAAO,GAAG,OAAO,CAAC,WAAW,GAAG,SAAS,CAAA;YAE7D,IAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,WAAW,CAAC,CAAC,CAAA;YAC7F,OAAO,OAAsD,CAAA;SAC9D;QAED,mCAAK,GAAL,UAAqE,EAAmB,EAAE,IAAoB,EAAE,OAAuB;YACrI,IAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAI,IAAI,CAAC,MAAM,SAAI,EAAI,EAAE,OAAO,CAAC,CAAA;YAC1D,IAAM,WAAW,GAAG,OAAO,IAAI,OAAO,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,GAAG,EAAwB,CAAA;YAEnG,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE;gBACxB,WAAW,CAAC,OAAO,GAAG,EAAE,CAAA;aACzB;YAED,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE;gBACxC,WAAW,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,8BAA8B,CAAA;aACrE;YAED,IAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,WAAW,CAAC,CAAC,CAAA;YAC/F,OAAO,OAAwD,CAAA;SAChE;QACH,0BAAC;IAAD,CA5JA,CAA2G,gBAAgB,GA4J1H;;IChKD;QAAsE,6CAAgB;QAGpF,mCAAa,KAAoB,EAAE,MAAc;YAAjD,YACE,kBAAM,KAAK,CAAC,SAEb;YADC,KAAI,CAAC,MAAM,GAAG,MAAM,CAAA;;SACrB;QAED,2CAAO,GAAP,UAAS,EAAM;YACb,IAAI,EAAE,KAAK,SAAS,EAAE;gBACpB,OAAO,IAAI,CAAC,MAAM,CAAA;aACnB;iBAAM;gBACL,IAAM,MAAM,GAAG,IAAI,CAAC,uBAAuB,CAAC,EAAE,CAAC,CAAA;gBAC/C,OAAU,IAAI,CAAC,MAAM,SAAI,MAAQ,CAAA;aAClC;SACF;QAED,2DAAuB,GAAvB,UAAyB,EAAK;YAC5B,OAAO,EAAE,GAAG,EAAE,CAAA;SACf;QAED,uCAAG,GAAH,UAAK,EAAK,EAAE,iBAAqC;YAC/C,IAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAA;YAC7B,IAAM,aAAa,GAAG,iBAAiB,GAAG,EAAE,WAAW,EAAE,iBAAiB,CAAC,KAAK,EAAE,GAAG,SAAS,CAAA;YAC9F,IAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC,CAAA;YACrE,OAAO,OAAwC,CAAA;SAChD;QACH,gCAAC;IAAD,CA3BA,CAAsE,gBAAgB,GA2BrF;;IC3BD;QAAmE,0CAA+B;QAAlG;;SAuCC;QApCC,kDAAiB,GAAjB,UAAmB,MAAU;YAC3B,IAAI,MAAM,KAAK,SAAS,EAAE;gBACxB,OAAO,IAAI,CAAC,OAAO,EAAE,CAAA;aACtB;iBAAM;gBACL,IAAM,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAA;gBACnC,OAAO,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAA;aACxB;SACF;QAED,8CAAa,GAAb,UAAe,MAAS;YACtB,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAA;SAC1C;QAED,qCAAI,GAAJ,UAAM,iBAAqC;YACzC,IAAM,aAAa,GAAG,iBAAiB,GAAG,EAAE,WAAW,EAAE,iBAAiB,CAAC,KAAK,EAAE,GAAG,SAAS,CAAA;YAC9F,IAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,aAAa,CAAC,CAAC,CAAA;YAC/E,OAAO,OAA0C,CAAA;SAClD;QAED,uCAAM,GAAN,UAAQ,MAAS;YACf,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,MAAM,CAAC,CAAkC,CAAA;SAClG;QAED,iDAAgB,GAAhB,UAAkB,MAAS;YACzB,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAA;SAC7C;QAED,uCAAM,GAAN,UAAQ,EAAK;YACX,IAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAA;YAC7B,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAkC,CAAA;SAClF;QAED,uCAAM,GAAN,UAAQ,MAAS;YACf,IAAM,IAAI,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAA;YAC3C,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAkC,CAAA;SACvF;QACH,6BAAC;IAAD,CAvCA,CAAmE,yBAAyB,GAuC3F;;ICxCD;QAAkF,wCAAiC;QAAnH;;SAIC;QAHC,0CAAW,GAAX,UAAa,MAAS;YACpB,OAAO,MAAM,CAAC,EAAE,CAAA;SACjB;QACH,2BAAC;IAAD,CAJA,CAAkF,sBAAsB,GAIvG;;ICHD;QAAwE,uCAAuB;QAC7F,6BAAa,KAAoB,EAAE,QAAgB;mBACjD,kBAAM,KAAK,EAAE,QAAQ,CAAC;SACvB;QACH,0BAAC;IAAD,CAJA,CAAwE,oBAAoB,GAI3F;;ICRD,oBAAoB;;;;;;;;;;;;;;;;;;;;;;;"}